# 评价体系

| 指标 | 变量 | 0D 定义 | 1D 定义 | 2D 定义 | 含义 |
|---|---|---|---|---|---|
| **能耗** | $E$ | $E=\int_0^{t_{end}} u(t)\,dt$ | 同 0D | 同 0D | 总能量消耗 |
| **温度偏差 RMSE** | $\mathrm{RMSE}$ | $\sqrt{\frac{1}{t_{end}}\int_0^{t_{end}} (T(t)-T_{set})^2 dt}$ | $\sqrt{\frac{1}{t_{end}L}\int_0^{t_{end}}\int_0^{L}(T(x,t)-T_{set})^2 dx\,dt}$ | $\sqrt{\frac{1}{t_{end}|\Omega|}\int_0^{t_{end}}\int_{\Omega}(T(x,y,t)-T_{set})^2 d\Omega\,dt}$ | 舒适度 |
| **最大超调** | $\Delta T_{\max}$ | $\max_{t\in[0,t_{end}]}(T(t)-T_{set})$ | $\max_{(x,t)\in[0,L]\times[0,t_{end}]}(T(x,t)-T_{set})$ | $\max_{(x,y,t)\in\Omega\times[0,t_{end}]}(T(x,y,t)-T_{set})$ | 峰值偏差 |
| **舒适覆盖率** | $\mathrm{CR}$ | $\frac{1}{t_{end}}\int_0^{t_{end}} \mathbf{1}_{T(t)\in[18,26]}\,dt$ | $\frac{1}{t_{end}\cdot L}\int_0^{t_{end}}\int_0^{L}\mathbf{1}_{T(x,t)\in[18,26]}\,dx\,dt$ | $\frac{1}{t_{end}\cdot|\Omega|}\int_0^{t_{end}}\int_{\Omega}\mathbf{1}_{T(x,y,t)\in[18,26]}\,d\Omega\,dt$ | 舒适时空占比 |
| **稳定时间** | $t_s$ | 首次满足 $|T(\tau)-T_{set}|\le0.5^\circ C$ 且保持 | $\inf\{t:\,|T(x,\tau)-T_{set}|\le0.5^\circ C,\forall x,\forall\tau\ge t\}$ | $\inf\{t:\,|T(x,y,\tau)-T_{set}|\le0.5^\circ C,\forall(x,y),\forall\tau\ge t\}$ | 响应速度 |
| **切换次数** | $N_{sw}$ | 加热器开关次数 | 同 0D | 同 0D | 设备磨损 |

**舒适区间定义**：$[18°C, 26°C]$。Comfort Ratio（CR）衡量"时空域中有多少比例处于人体舒适温度范围内"。

- **0D**：只有时间维度，CR = 温度在 $[18, 26]$ 内的时间占比
- **1D**：CR(t) = 空间中处于 $[18, 26]$ 的比例；总 CR 为时空平均
- **2D**：同理，CR(t) = 二维域中处于 $[18, 26]$ 的面积占比；总 CR 为时空平均

**与 RMSE 的区别**：RMSE 关注偏离 $T_{set}$ 的程度（越偏越差），而 CR 回答的是"有多少时间/空间是**可接受的**"——即使偏离 $T_{set}$，只要还在 $[18, 26]$ 内就算舒适。这对 Hysteresis 等振荡型控制器尤其重要。

这六个进行加权平均：
得到我们所有实验的指标结果，可以用于对比
# 0D 考虑因素

参数固定：$T_a=5°C$, $T_{set}=20°C$, $T_{init}=15°C$, $k=0.1\,min^{-1}$, $U_{max}=2.5\,°C/min$, $t_{end}=60\,min$
变量：控制策略（6种）—— Bang-Bang, Hysteresis ($\delta=0.5°C$), P ($K_p=2.0$), PI ($K_p=2.0, K_i=0.5$), PID ($K_p=2.0, K_i=0.5, K_d=1.0$), LQR ($Q=100, R=0.1$)

## 0D 实验一：Bang-Bang 与 Zeno Effect

**画图要求：**
展示 Bang-Bang 为何会体现 Zeno-Effect，也就是下面这张图，已经很清晰了，同时还展示了我们的延长 $\tau$

![[Pasted image 20260213135054.png]]

- (a) 温度轨迹 $T(t)$：放大 inset 展示在 $T_{set}$ 附近的 chattering
- (b) 控制信号 $u(t)$：展示高频开关
- (c) 切换间隔 $\Delta t_n$ vs switch index：展示间隔趋零（Zeno 特征）
- (d) 不同采样周期 $\tau$ 下的切换次数柱状图：证明 $\tau$ 越小切换越多

## 0D 实验二：6 种控制策略对比

> 核心问题：如何比较不同的控制策略的好坏？直接用我们评价体系的方程去证明。

**画图要求：**
- **6 策略温度轨迹对比图**：$T(t)$ 叠加在同一张图上（6 条曲线，各自颜色），红虚线标 $T_{set}$，灰色带标 $\pm 0.5°C$ 舒适区间。下方子图为对应的控制信号 $u(t)$
- **性能指标柱状图**（2×3 子面板）：每个面板一个指标（E、RMSE、$\Delta T_{\max}$、CR、$t_s$、$N_{sw}$），6 个柱子对应 6 种策略
- 统一代价 $J$ 的Dataset 输出，展示不同策略下的所有性能指标，和统一代价后的排名，还有对应的数据，像房间平均温度什么的
- **统一代价 $J$ 柱状图**：6 策略的 J 值排名，标注数值
- **Pareto 前沿散点图**：X 轴 = 能耗 E，Y 轴 = RMSE，每个点标注策略名，连 Pareto 前沿线


## 统一代价函数（最终评分）

先做归一化，再加权求和：
$$ J = w_E\hat{E} + w_R\widehat{\text{RMSE}} + w_O\widehat{\Delta T}_{\max} + w_C(1-\mathrm{CR}) + w_S\hat{N}_{sw} + w_T\hat{t}_s $$
其中：
* $\hat{E} = E / E_{ref}$
* $\widehat{\text{RMSE}} = \text{RMSE} / R_{ref}$
* $\widehat{\Delta T}_{\max} = \Delta T_{\max} / O_{ref}$
* $(1 - \mathrm{CR})$：CR 越高越好，所以用 $1 - \mathrm{CR}$ 转化为"越低越好"，无需额外归一化（CR $\in [0,1]$）
* $\hat{N}_{sw} = N_{sw}/N_{ref}$
* $\hat{t}_s = \min(t_s, t_{end})/t_{end}$

建议参考量 $E_{ref}, R_{ref}, O_{ref}, N_{ref}$ 取自同一实验批次基线（如同批次最大值），保证同批次可比。

**默认权重（可直接用）：**

| 场景 | $w_E$ | $w_R$ | $w_O$ | $w_C$ | $w_S$ | $w_T$ | 适用 |
|------|--------|--------|--------|--------|--------|--------|------|
| 平衡型（默认） | 0.15 | 0.25 | 0.15 | 0.15 | 0.15 | 0.15 | 综合评价 |
| 舒适优先 | 0.10 | 0.25 | 0.20 | 0.20 | 0.10 | 0.15 | 展示体验 |
| 节能优先 | 0.30 | 0.20 | 0.10 | 0.10 | 0.15 | 0.15 | 工程运行 |

规则：始终保证 $\sum w_i=1$ 。

**0D / 1D / 2D 映射规则：**

| 模型  | 能耗 $E$       | RMSE                                            | 最大超调 $\Delta T_{\max}$     | 舒适覆盖率 CR |
| --- | ------------ | ----------------------------------------------- | -------------------------- | ------------ |
| 0D  | $\int u\,dt$ | $\sqrt{\frac{1}{t_{end}}\int(T-T_{set})^2\,dt}$ | $\max(T(t)-T_{set})$       | $\frac{1}{t_{end}}\int\mathbf{1}_{T\in[18,26]}\,dt$ |
| 1D  | 同上           | $T(t)\to\bar{T}(t)=\frac{1}{L}\int_0^L T\,dx$   | $\max(\bar{T}(t)-T_{set})$ | $\frac{1}{t_{end}L}\iint\mathbf{1}_{T\in[18,26]}\,dx\,dt$ |
| 2D  | 同上           | $T(t)\to\bar{T}(t)=\frac{1}{\Omega}\iint T\,dA$ | 同上                         | $\frac{1}{t_{end}|\Omega|}\iiint\mathbf{1}_{T\in[18,26]}\,d\Omega\,dt$ |

## 0D 图表清单

| # | 图名 | 类型 | 说明 |
|---|------|------|------|
| 1 | Zeno Effect 展示 | 2×2 面板 | 已有（Zewey Figure_1） |
| 2 | 6 策略温度+控制信号 | 双面板叠加曲线 | 核心对比图 |
| 3 | 性能指标柱状图 | 多面板柱状 | 5 个指标 |
| 4 | 统一代价 J 排名 | 柱状图 | 最终评分 |
| 5 | Pareto 前沿 | 散点图 | Energy vs RMSE |
| 6 | 参数敏感性 | 多组曲线 | δ, Kp, τ |

# 1D 考虑因素

不变：环境变量因素（$T_a=5°C$, $T_{set}=20°C$, $T_{init}=15°C$, $\alpha=0.5\,m^2/min$, $h_{wall}=0.5\,m^{-1}$, $U_{max}=5.0\,°C/min$）
空间域：$[0, L] = [0, 5]\,m$
变量：加热器位置 $x_h$，恒温器位置 $x_s$，点热源或者高斯热源，Boundary Condition（就定两种，更实际：NBC+Robin 和 Robin+Robin）
控制策略：统一用 Bang-Bang (hysteresis, $\delta=0.5°C$)

**BC 约定：**
- **N-R**：左端 $x=0$ 为 Neumann（保温墙），右端 $x=L$ 为 Robin（外墙）—— 一面朝外
- **R-R**：两端均为 Robin（两面外墙）

---

## 1D 实验一：点热源下，变化加热器和恒温器，找最佳位置，让房间评分最高

### 1.1 加热器固定在 $x=0$（保温墙端），边缘条件 N-R，变化恒温器位置

> 看恒温器从保温墙到外墙扫描时，房间温度怎么变，舒适度如何，耗能如何，是否超出温度太多，开关次数如何

**画图要求：**
- **3D 曲面图**：$T(x_s, t)$ 恒温器读数随位置和时间变化（类似 Zewey Figure_2 的 (a)）
- **Comfort ratio 3D 曲面图**：不同 $x_s$ 下舒适覆盖率随时间的变化（类似 Zewey Figure_2 的 (b)）
- **Energy proxy vs $x_s$**：加热器开启时间随恒温器位置变化的曲线（类似 Zewey Figure_2 的 (c)）
- **终态温度分布**：选 3 条代表 $x_s$（最小、中间、最大）的 $T(x, t_{end})$ 叠加 + min/max 包络线（类似 Zewey Figure_2 的 (d)）
- **Global summaries 2×2 面板**：Mean comfort / Energy / Overshoot / Switches vs $x_s$（类似 Zewey Figure_3）

![[Pasted image 20260213142351.png]]

![[Pasted image 20260213142403.png]]


### 1.2 加热器固定在 $x=L/2$（中间），边缘条件 N-R，变化恒温器位置

> 加热器在房间中央，恒温器扫描。对比 1.1 看加热器位置变化后最优恒温器位置是否跟着移动。

**画图要求：** 同 1.1 格式（3D 曲面 + Global summaries）

![[Pasted image 20260213142413.png]]

![[Pasted image 20260213142421.png]]

### 1.3 加热器固定在 $x=L/2$（中间），边缘条件 R-R，变化恒温器位置

> 两端均散热，对比 1.2（N-R）看边界条件对最优恒温器位置的影响。

**画图要求：** 同 1.1 格式

![[Pasted image 20260213142428.png]]
![[Pasted image 20260213142434.png]]

### 1.4 Summary 图表，用线图，柱状图，展示不同方案的对比

![[Pasted image 20260213142338.png]]

**画图要求：**
- **三组实验的最优恒温器位置对比表**：1.1/1.2/1.3 各自的最优 $x_s$ + 对应 J 值
- **J vs $x_s$ 叠加折线图**：三组实验的 J 曲线叠加，不同颜色/线型区分
- **舒适导向 vs 节能导向排名**：用不同权重重算 J，看最优位置是否改变
- 输出 CSV 排名表

> 问题关键点：如何证明在中间的时候最好？直接看数值！

---

## 1D 实验二：高斯热源对比——重复实验一，用高斯热源替代点热源

> 基本上是重复实验一，因为用高斯热源我们就要重新确认恒温器的最优位置。
> 核心问题：**高斯热源（分布式加热）是否改变最优恒温器位置？性能提升多少？**

### 2.1 高斯热源，加热器固定在 $x=0$，边缘条件 N-R，变化恒温器位置

**画图要求：** 同实验一 1.1 格式。额外增加：
- **点热源 vs 高斯热源终态温度分布对比**：相同 $x_s$ 下，两种热源的 $T(x, t_{end})$ 叠加到同一图

### 2.2 高斯热源，加热器固定在 $x=L/2$，边缘条件 N-R，变化恒温器位置

**画图要求：** 同 2.1 格式

### 2.3 高斯热源，加热器固定在 $x=L/2$，边缘条件 R-R，变化恒温器位置

**画图要求：** 同 2.1 格式

### 2.4 全枚举——加热器位置 × 恒温器位置 × BC 联合搜索

> 加热器和恒温器位置都不固定，进行全枚举。
> 枚举空间：$x_h$（如 20 个采样点）× $x_s$（20 个采样点）× 热源类型（2 种）× BC（2 种）= $20 \times 20 \times 2 \times 2 = 1600$ 种方案

**画图要求：**
- 输出 **CSV 表格**，记录每个方案的所有指标 + J 值
- **$J(x_h, x_s)$ 热力图**：X 轴 = 加热器位置，Y 轴 = 恒温器位置，颜色 = J 值。分 4 张（2 热源 × 2 BC），合为 2×2 面板
- 每张热力图上用 ★ 标注最优组合

### 2.5 Summary

**画图要求：**
- **汇总表格**：每组实验（1.1-1.3 点热源 + 2.1-2.3 高斯）的最优恒温器位置对比
- **点热源 vs 高斯热源性能对比柱状图**：在相同最优配置下，逐项对比 E、RMSE、$\Delta T_{\max}$、$N_{sw}$、J
- **全枚举全局最优方案**：标注最佳的加热器位置+恒温器位置+热源类型+BC 组合
- **舒适导向 vs 节能导向最优方案对比**

---

## 1D 实验三：附加功能，用于人工参考

### 3.1 Steady state 温度分布线图

> 输入任意 $(x_h, x_s, \text{热源类型}, \text{BC})$，绘制该方案的稳态温度分布 $T(x, t_{end})$

**画图要求：** 线图，横轴 = 位置 $x$，纵轴 = 温度 $T$。红虚线标 $T_{set}$，绿色带标 $\pm 0.5°C$ 舒适区间，竖虚线标加热器位置和恒温器位置

### 3.2 性能指标面板图

> 只在单变量枚举（固定其他变量，扫描一个变量）时使用，这样才能画二维图

**画图要求：** 4 面板折线图 —— Energy consumption / Room Average RMSE / $\Delta T_{\max}$ / Heater switches vs 被扫描变量（如 $x_s$ 或 $x_h$）

### 3.3 1D temperature field 时空热力图

> 只在单变量枚举时使用

**画图要求：** 横轴 = 时间 $t$，纵轴 = 位置 $x$，颜色 = 温度 $T(x,t)$。粉色虚线标恒温器位置 $x_s$，绿色虚线标加热器位置 $x_h$。类似 Result 中已有的 heatmap 格式。

## 1D 图表清单

| # | 实验 | 图名 | 类型 | 说明 |
|---|------|------|------|------|
| 1 | 1.1-1.3 | 恒温器读数 3D 曲面 | 3D surface ×3 | $T(x_s, t)$ |
| 2 | 1.1-1.3 | Comfort ratio 3D 曲面 | 3D surface ×3 | 舒适覆盖率 |
| 3 | 1.1-1.3 | Global summaries 2×2 面板 | 折线图 ×3 | Comfort/Energy/Overshoot/Switches vs $x_s$ |
| 4 | 1.1-1.3 | 终态温度分布（代表 $x_s$） | 叠加线图 ×3 | 含 min/max 包络 |
| 5 | 1.4 | J vs $x_s$ 叠加对比 | 折线叠加图 | 三组实验叠加 |
| 6 | 1.4 | 排名表 | 表格+CSV | 含权重敏感性 |
| 7 | 2.1-2.3 | 高斯热源同格式图 | 同上 ×3 | 对应 1.1-1.3 |
| 8 | 2.1-2.3 | 点 vs 高斯终态分布对比 | 叠加线图 ×3 | 同一 $x_s$ 下对比 |
| 9 | 2.4 | $J(x_h, x_s)$ 热力图 | 2×2 面板 | 2 热源 × 2 BC |
| 10 | 2.5 | 点 vs 高斯性能柱状图 | 柱状图 | 逐项对比 |
| 11 | 2.5 | 全局最优方案汇总 | 表格 | 含舒适/节能导向 |



# 2D 考虑因素

不变：环境变量因素（$T_a=5°C$, $T_{set}=20°C$, $T_{init}=15°C$, $\alpha=0.01\,m^2/min$）
控制策略：统一用 Bang-Bang (hysteresis, $\delta=0.5°C$)，与 1D 保持一致，便于跨维度对比
变量：加热器位置 $(x_h, y_h)$，恒温器位置 $(x_s, y_s)$，点热源或者高斯热源，Boundary Condition，**房间几何形状**

### 房间几何形状

本项目考虑三种房间几何：

| 几何 | 域定义 | 面积 | 说明 |
|------|--------|------|------|
| **正方形 (Square)** | $[0,5]\times[0,5]\,m$ | $25\,m^2$ | 基准几何，实验 1-6 使用 |
| **矩形 (Rectangle)** | $[0,7.5]\times[0,2.5]\,m$ | $18.75\,m^2$ | 与 L 形等面积，长宽比 3:1 |
| **L 形 (L-shape)** | $[0,5]\times[0,5]\,m$ 去掉右上角 $[2.5,5]\times[2.5,5]\,m$ | $18.75\,m^2$ | 非凸域，存在热死角 |

**L 形房间示意图：**

```
y
5 ┌─────────┐
  │         │
  │  Region │
2.5├────┐    │  ← 右上角 [2.5,5]×[2.5,5] 被移除
  │    │xxxx│
  │    │xxxx│
0 └────┴────┘
  0   2.5   5  x
```

其中 `x` 表示被移除的区域。L 形域 $\Omega_L = [0,5]\times[0,2.5] \cup [0,2.5]\times[2.5,5]$。

### BC 约定

**正方形/矩形房间：**
- **RNNN**：底边 $y=0$ 为 Robin（外墙，散热），其余三面 Neumann（保温墙/共用墙）—— 类似公寓房间，只有一面朝外
- **RRRR**：四面均为 Robin（外墙）—— 类似独栋小屋，四面散热

**L 形房间：**
- **L-RNNN**：底边 $y=0$（全长 $5m$）为 Robin（外墙），其余所有边（包括 L 形内凹边）为 Neumann
- **L-RRRR**：所有外边界均为 Robin（L 形周长上的每一段都散热）

---

## 实验一：RNNN 下，恒温器固定在房间中心，变化加热器位置，找最佳加热位置

> 设定：BC = RNNN（底边 Robin），恒温器固定在 $(L_1/2, L_2/2) = (2.5, 2.5)$，控制策略 = Hysteresis
> 核心问题：**加热器放在房间哪个位置，综合评分最高？**

### 1.1 加热器沿底边 Robin 外墙 ($y=0$) 移动，$x$ 从 $0$ 到 $L_1$ 扫描

> 物理含义：暖气片装在外墙下方（最常见的安装方式），看沿外墙哪个 x 位置最优

**画图要求：**
- 选 3-5 个代表性加热器位置（如 $x_h=0.5, 1.5, 2.5, 3.5, 4.5$）的**终态 2D 温度场热力图**，并排展示（1×5 或 2×3 子图），热力图上用 ★ 标加热器位置、× 标恒温器位置
- **评价指标 vs 加热器 $x_h$ 位置**的折线图（4 个子面板：能耗 E、RMSE、空间不均匀度 U、切换次数 $N_{sw}$），类似 1D 的做法
- 每个位置对应的**房间均温 $\bar{T}(t)$ 时间曲线**叠加在一张图上（不同颜色），红虚线标 $T_{set}=20°C$

### 1.2 加热器沿顶边 Neumann 保温墙 ($y=L_2$) 移动，$x$ 从 $0$ 到 $L_1$ 扫描

> 物理含义：加热器装在离外墙最远的保温墙上，热量需要穿过整个房间才到达冷的外墙

**画图要求：** 同 1.1 格式

### 1.3 加热器沿房间中线 ($y=L_2/2$) 移动，$x$ 从 $0$ 到 $L_1$ 扫描

> 物理含义：独立式取暖器放在房间中央区域

**画图要求：** 同 1.1 格式

### 1.4 加热器做全房间 2D 网格扫描（$x_h, y_h$ 均变化）

> 全面枚举所有位置组合，输出最优位置。网格建议 $10 \times 10$ 或更密（如 $15 \times 15$）。

**画图要求：**
- **统一代价 $J(x_h, y_h)$ 的 2D 热力图**（颜色越浅 = 代价越低 = 越好），用 ★ 标最优位置，用 × 标恒温器位置，colorbar 标注 J 值范围
- **能耗 $E(x_h, y_h)$ 热力图**（同样格式）
- **空间均匀度 $U(x_h, y_h)$ 热力图**
- **RMSE$(x_h, y_h)$ 热力图**
- 这四张图可以合并为 **2×2 面板图**

### 1.5 Summary

**画图要求：**
- **三条扫描线叠加对比图**：将 1.1（$y=0$）、1.2（$y=L_2$）、1.3（$y=L_2/2$）的 J vs $x_h$ 曲线叠加到同一张图上，用不同颜色/线型区分，直观展示"加热器靠近外墙 vs 靠近保温墙 vs 在中间"哪个策略更好
- **最优加热器位置的终态温度场大图**（单独一张，标注详细信息：位置、J 值、各项指标）
- **Top-5 排名表**：列出代价最低的前 5 个加热器位置及其完整评价指标
- 输出一个csv的所有排名的方案

> **问题关键点：** 在 RNNN 下，加热器靠近外墙（补偿散热）还是靠近中心（提升均匀度）更好？直接看数值！

---

## 实验二：RNNN 下，加热器固定在最优位置，变化恒温器位置，找最佳恒温器位置

> 设定：BC = RNNN，加热器位置 = 实验一找到的最优位置，控制策略 = Hysteresis
> 核心问题：**恒温器（传感器）放在哪里，控制效果最好？**

### 2.1 恒温器沿 $x$ 方向中线 ($y=L_2/2$) 移动

> 看恒温器在左右方向上的最佳位置

**画图要求：**
- 不同恒温器位置下的**均温 $\bar{T}(t)$ 时间序列叠加图**
- **评价指标 vs 恒温器 $x_s$ 位置**折线图（4 面板）

### 2.2 恒温器沿 $y$ 方向中线 ($x=L_1/2$) 移动

> 看恒温器在外墙→保温墙方向上的最佳深度（靠近外墙 vs 靠近保温墙 vs 中间）

**画图要求：** 同 2.1 格式

### 2.3 恒温器做全房间 2D 网格扫描

**画图要求：**
- **$J(x_s, y_s)$ 的 2D 热力图**，用 ★ 标加热器位置，用 ● 标最优恒温器位置
- **传感器偏差 $\text{SensorBias}(x_s, y_s)$ 热力图**：传感器读数与全域均温的偏差，说明"为什么恒温器位置很重要"
- 可合并为 **1×2 面板图**

### 2.4 Summary

**画图要求：**
- **恒温器 vs 加热器位置关系图**：在 2D 房间平面上同时标注加热器最优位置和恒温器最优位置，画出两者相对关系
- **对比图：恒温器在加热器旁 vs 在最优位置**——用两组温度场 + 指标对比，数据证明"恒温器不应该放在加热器旁边"
- **Top-5 恒温器位置排名表**

> **问题关键点：** 恒温器放在加热器旁边读数升温快，控制器以为房间已暖就关了加热器，实际上远端还很冷。放在对面或中央能更好地代表全域温度。用数据证明！

---

## 实验三：点热源 vs 高斯热源对比

> 实验一二默认用**点热源**。本实验用**高斯热源**（$\sigma=0.5\,m$）重做关键配置，看热源空间分布对最优位置和性能的影响。
> 核心问题：**热量的空间扩散方式是否影响最优配置？**

### 3.1 高斯热源下，加热器全房间 2D 扫描（对应实验 1.4）

**画图要求：**
- **$J(x_h, y_h)$ 热力图（高斯）**，与实验 1.4（点热源）**并排展示**（1×2 面板，左=点热源，右=高斯）
- 标注两者的最优位置，看是否发生偏移

### 3.2 高斯热源下，恒温器全房间 2D 扫描（对应实验 2.3）

**画图要求：**
- **$J(x_s, y_s)$ 热力图（高斯）**，与实验 2.3（点热源）并排展示

### 3.3 同一位置下的终态温度场并排对比

> 选 3 个代表性加热器位置（靠近外墙角落、外墙中点、房间中心），展示两种热源的温度场差异

**画图要求：**
- **2×3 温度场热力图网格**（行 = 点热源 / 高斯热源，列 = 3 个加热器位置）
- **空间均匀度 U 对比柱状图**：同位置下点热源 vs 高斯热源的 U 值

### 3.4 Summary

**画图要求：**
- **点热源 vs 高斯热源指标对比表**：选 5 个代表位置，逐项对比 E、RMSE、U、$N_{sw}$、J
- 一句话结论：高斯热源在均匀度上的优势有多大？最优位置是否因热源类型改变？

---

## 实验四：边界条件对比（RNNN vs RRRR）

> 对比"一面外墙"（RNNN，公寓房间）vs"四面外墙"（RRRR，独栋小屋），看 BC 对最优配置和控制性能的影响。
> 核心问题：**不同建筑类型下，加热器和恒温器的最优位置是否不同？保温的价值有多大？**

### 4.1 RRRR 下加热器全房间 2D 扫描

> 预期：RRRR 四面散热，最优加热器位置应偏向房间中心（对称散热）

**画图要求：**
- **$J(x_h, y_h)$ 热力图（RRRR）**，与实验 1.4（RNNN）并排展示
- 标注两种 BC 下的最优加热器位置

### 4.2 RRRR 下恒温器全房间 2D 扫描

**画图要求：**
- **$J(x_s, y_s)$ 热力图（RRRR）**，与实验 2.3（RNNN）并排展示

### 4.3 两种 BC 下最优方案的终态温度场对比

**画图要求：**
- **1×2 温度场热力图**（左 = RNNN 最优方案，右 = RRRR 最优方案），标注加热器和恒温器位置
- **各项指标柱状图**：两种 BC 最优方案的 E、RMSE、U、$N_{sw}$、J 并排柱状图
- **可达性讨论**：RRRR 散热更大，是否所有加热器位置都能可达 $T_{set}=20°C$？不可达区域标红

### 4.4 Summary

**画图要求：**
- **两种 BC 的综合对比表格**
- **保温价值量化**：RNNN 比 RRRR 节省多少能耗？RMSE 改善多少？
- 实际意义：一面保温墙能改善多少控制性能？

---

## 实验五：全枚举——加热器位置 × 恒温器位置 × 热源类型 × BC 联合搜索

> 类似 1D 的实验 2.4，进行更大范围的枚举，找到 2D 的全局最优方案。
> 枚举空间：加热器位置（$n \times n$ 网格）× 恒温器位置（$m \times m$ 网格）× 热源类型（2种）× BC（2种）

### 5.1 枚举设计

- 加热器网格：$8 \times 8 = 64$ 个位置（$x_h, y_h$ 均匀采样，避开边界 0.3m）
- 恒温器网格：$8 \times 8 = 64$ 个位置
- 热源类型：点热源、高斯热源（$\sigma=0.5$）
- BC：RNNN、RRRR
- **总方案数：$64 \times 64 \times 2 \times 2 = 16384$**（如果太多，可以先粗筛：加热器 $5\times5$、恒温器 $5\times5$，= $5\times5\times5\times5\times2\times2 = 2500$ 种）
- 输出 CSV 表格，记录每个方案的所有指标 + J 值

### 5.2 全局最优结果

**画图要求：**
- **最终推荐配置图**：2D 房间平面图，标注最优加热器位置（★）、最优恒温器位置（●）、BC 类型、热源类型、J 值
- **该最优方案的温度场演化**：$t=0, 15, 30, 45, 60\,min$ 五个时刻的温度场快照（1×5 横排）
- **该方案的控制信号 $u(t)$ + 均温 $\bar{T}(t)$ 时间曲线**（双 y 轴图）

### 5.3 排名汇总

**画图要求：**
- **Top-10 方案排名表**（按 J 值从小到大），包含：加热器位置、恒温器位置、热源类型、BC、各项指标、J
- **舒适导向 vs 节能导向排名对比**：用不同权重重算 J，看最优方案是否改变
- **不可达方案清单**：标注哪些配置无法达到 $T_{set}$，分析失败原因

---

## 实验六：附加功能，用于人工参考

> 与 1D 的实验三对应，提供辅助可视化工具

### 6.1 任意方案的 steady state 终态温度场

**画图要求：** 能够输入任意 $(x_h, y_h, x_s, y_s, \text{热源类型}, \text{BC})$，输出该方案的 2D 终态温度场热力图，标注加热器和恒温器位置

### 6.2 任意方案的性能时间曲线面板

**画图要求：** 4 面板图 —— 均温 $\bar{T}(t)$、空间不均匀度 $\Delta T_{spatial}(t)$、控制信号 $u(t)$、传感器读数 vs 均温对比

### 6.3 沿 $x$ 和 $y$ 方向的 1D 温度剖面线

**画图要求：** 从 2D 温度场中切出 $T(x, y_0, t_{end})$ 和 $T(x_0, y, t_{end})$ 两条剖面线，叠加到同一图上，虚线标加热器和恒温器位置。类似 1D 的温度分布线图，但现在有两个方向。

### 6.4 加热器位置 × 恒温器位置的交互热图

> 固定热源类型和 BC，展示 $(x_h, y_h)$ 和 $(x_s, y_s)$ 的联合影响

**画图要求：** 如果降维到 1D 扫描（如固定 $y_h, y_s$，只变 $x_h, x_s$），可以画 **$J(x_h, x_s)$ 的 2D 热力图**（x 轴=加热器位置，y 轴=恒温器位置），展示两者的交互关系

---

## 实验七：房间几何形状对比（Square vs Rectangle vs L-shape）

> 核心问题：**房间形状如何影响温度分布、最优配置和控制性能？凸域（正方形/矩形）与非凸域（L 形）的本质区别是什么？**
> 设定：统一使用点热源，BC = 各自的 RNNN（底边 Robin），加热器和恒温器分别放在各自的全域最优位置

### 7.1 三种几何下的加热器全域 2D 扫描

> 恒温器固定在各自域的几何中心（正方形 (2.5,2.5)、矩形 (3.75,1.25)、L 形 (1.25,2.5) 附近），扫描加热器位置

**画图要求：**
- **1×3 热力图面板**：左=正方形 $J(x_h,y_h)$、中=矩形 $J(x_h,y_h)$、右=L 形 $J(x_h,y_h)$，各自标注最优位置 ★
- 注意：L 形热力图中被移除区域用灰色遮罩标注
- 每种几何的最优加热器位置标注坐标和 J 值

### 7.2 三种几何下的恒温器全域 2D 扫描

> 加热器固定在 7.1 找到的最优位置，扫描恒温器位置

**画图要求：**
- **1×3 热力图面板**：左=正方形 $J(x_s,y_s)$、中=矩形 $J(x_s,y_s)$、右=L 形 $J(x_s,y_s)$
- L 形中被移除区域用灰色遮罩

### 7.3 三种几何的最优方案终态温度场对比

> 每种几何用各自的全局最优（加热器+恒温器）配置

**画图要求：**
- **1×3 终态温度场热力图**：标注加热器 ★、恒温器 ●、温度场分布
- **性能指标柱状图**：3 组柱子（Square / Rectangle / L-shape），指标 = E、RMSE、$\Delta T_{\max}$、CR、$N_{sw}$、J
- **均温 $\bar{T}(t)$ 时间曲线叠加图**：三种几何在各自最优配置下的温度曲线

### 7.4 矩形 vs L 形等面积对比

> 矩形和 L 形面积相同（$18.75\,m^2$），但形状不同。这一对比回答：**相同面积下，L 形比矩形难控制多少？**

**画图要求：**
- **1×2 终态温度场对比**（左=矩形、右=L 形），使用各自最优配置
- **指标差异柱状图**：各项指标的差值或比值（L 形 / 矩形），标注百分比变化
- 讨论：L 形的额外控制代价主要来自哪个指标？（能耗？均匀度？稳定时间？）

### 7.5 Summary

**画图要求：**
- **三种几何的综合对比表**：各几何的最优配置、各项指标、J 值
- **关键结论**：形状复杂度对控制性能的影响量级；L 形对比等面积矩形的额外代价
- 输出 CSV

---

## 实验八：L 形房间死角/热盲区分析

> 核心问题：**L 形房间的内凹拐角区域（右上方向的死角）是否存在温度盲区？加热器和恒温器对该区域的控制能力如何？**
> L 形的独特难点：热量从加热器到 L 形拐角需要绕弯扩散，导致该区域升温慢、温度低

### 8.1 不同加热器位置下的死角温度分析

> 选 6 个代表性加热器位置：
> - (a) 底边中点 (2.5, 0)
> - (b) 左下角 (0.5, 0.5)
> - (c) L 形竖臂中心 (1.25, 3.75)
> - (d) L 形横臂中心 (2.5, 1.25)
> - (e) L 形拐角附近 (2.0, 2.0)
> - (f) 左上角 (0.5, 4.5)
>
> 恒温器固定在 L 形域中心附近 (1.25, 2.5)

**画图要求：**
- **2×3 终态温度场热力图**：6 个加热器位置的终态 $T(x,y,t_{end})$，标注加热器 ★ 和恒温器 ×
- **死角温度柱状图**：每个方案中 L 形拐角区域（$(x,y)\in[1.5,2.5]\times[1.5,2.5]$ 附近的内凹角区域）的平均温度和最低温度
- **温度差异热力图**：$T_{max}(x,y) - T_{min}(x,y)$，展示哪些区域温度波动最大

### 8.2 死角区域时间演化

> 选最能"照顾死角"的加热器位置和最不能照顾的位置各一个

**画图要求：**
- **2×1 时空热力图**：上=最佳方案、下=最差方案，横轴=时间，纵轴=沿 L 形拐角剖面线的位置
- **死角区域均温 vs 全域均温的时间曲线**：两条曲线叠加（实线=全域均温，虚线=死角区域均温），展示死角区域的温度滞后
- 标注稳定时间差：死角区域比全域平均慢多少才进入舒适区间？

### 8.3 Comfort Ratio 空间分布

> 哪些空间位置长期处于不舒适温度？

**画图要求：**
- **1×3 CR 空间分布热力图**：3 个代表性方案的 $\mathrm{CR}(x,y) = \frac{1}{t_{end}}\int_0^{t_{end}}\mathbf{1}_{T(x,y,t)\in[18,26]}\,dt$
- 红色区域表示 CR 低（长期不舒适），蓝色表示 CR 高
- 重点看 L 形拐角附近的 CR 是否显著低于其他区域

### 8.4 Summary

**画图要求：**
- **死角温度 vs 加热器距拐角距离的散点图**：X 轴=加热器到 L 形内凹角的距离，Y 轴=死角区域平均温度，展示距离效应
- **关键结论**：L 形死角的温度偏差量级；哪些加热器位置能最好地缓解死角问题
- **建议**：是否需要多加热器才能解决死角问题？（引出实验十）

---

## 实验九：L 形房间最优位置全枚举搜索

> 核心问题：**在 L 形非凸域中，加热器和恒温器的全局最优位置在哪里？与正方形的最优位置有何本质区别？**

### 9.1 L 形房间加热器全域扫描（恒温器固定）

> 恒温器固定在 L 形域中心 (1.25, 2.5)，加热器在 L 域内所有合法位置扫描

**画图要求：**
- **$J(x_h, y_h)$ 热力图**：L 域中加热器位置的代价分布，被移除区域灰色遮罩，★ 标最优位置
- **分别展示 L-RNNN 和 L-RRRR 两种 BC**：1×2 面板图

### 9.2 L 形房间恒温器全域扫描（加热器固定在 9.1 最优位置）

**画图要求：**
- **$J(x_s, y_s)$ 热力图**：1×2 面板（L-RNNN / L-RRRR）
- **传感器偏差 SensorBias 热力图**：恒温器在 L 形不同位置的读数偏差

### 9.3 L 形房间全枚举（加热器 × 恒温器 × 热源 × BC）

> 枚举空间：加热器在 L 域内 $n$ 个采样点 × 恒温器在 L 域内 $m$ 个采样点 × 2 热源 × 2 BC
> 注意：采样点必须在 L 域内（排除被移除的右上角区域）

**画图要求：**
- 输出 **CSV 表格**
- **全局最优方案配置图**：L 形平面标注 ★ 加热器 + ● 恒温器 + 各项指标
- **最优方案温度场演化**：$t=0, 15, 30, 45, 60\,min$ 五个时刻的温度场快照（1×5 横排），每个快照画 L 形域的轮廓
- **Top-10 排名表**

### 9.4 L 形 vs 正方形最优方案深度对比

**画图要求：**
- **1×2 终态温度场**（左=正方形最优、右=L 形最优），标注各自的加热器和恒温器位置
- **指标对比柱状图**：两种几何各自最优方案的所有指标
- **位置对比图**：在归一化坐标下，两种几何的最优加热器位置和恒温器位置是否有规律（例如，是否都倾向于靠近外墙？靠近域中心？）

### 9.5 Summary

**画图要求：**
- **L 形全枚举综合结论表**
- **关键发现**：L 形最优位置相对于域几何的规律
- **舒适导向 vs 节能导向排名对比**

---

## 实验十：L 形房间多加热器探索

> 核心问题：**L 形的非凸特性是否使得单加热器无法有效覆盖所有区域？增加第二个加热器能带来多大改善？**
> 这是本项目的进阶实验，探索多加热器配置的必要性和效果

### 10.1 双加热器 vs 单加热器对比

> 设定：
> - 单加热器：使用实验 9 找到的最优位置，功率 $U_{max}$
> - 双加热器：两个加热器各 $U_{max}/2$（总功率不变），位置待优化
>   - 方案 A：一个在竖臂 (1.25, 3.75)，一个在横臂 (3.75, 1.25)
>   - 方案 B：一个在拐角附近 (2.0, 2.0)，一个在远端 (0.5, 0.5)
>   - 方案 C：通过粗枚举搜索的最优双加热器位置

**画图要求：**
- **2×2 终态温度场对比**：单加热器 / 双加热器方案 A / 方案 B / 方案 C
- **性能指标柱状图**：4 种方案的 E、RMSE、$\Delta T_{\max}$、CR、$N_{sw}$、J
- **死角区域温度对比**：同实验 8 的死角分析指标，对比单 vs 双加热器

### 10.2 双加热器位置联合优化

> 两个加热器位置 $(x_{h1}, y_{h1})$ 和 $(x_{h2}, y_{h2})$ 联合搜索
> 枚举空间较大（$n^2 \times n^2$），可用粗网格（如各 $4\times4=16$ 个位置，共 $16\times16=256$ 种组合）

**画图要求：**
- **最优双加热器配置图**：L 形平面标注 ★1、★2 两个加热器位置 + ● 恒温器位置
- **与单加热器最优方案的指标对比**：柱状图或表格，标注各项改善百分比
- **单加热器 vs 双加热器的 $\bar{T}(t)$ 时间曲线叠加**

### 10.3 恒温器策略：单传感器 vs 双传感器

> 当有两个加热器时，恒温器策略也应考虑：
> - 策略 A：单传感器控制两个加热器（同步开关）
> - 策略 B：两个独立传感器分别控制各自的加热器（独立开关）—— 相当于将 L 形分为两个区域独立控温

**画图要求：**
- **终态温度场对比**（1×2 面板：同步控制 vs 独立控制）
- **控制信号时间曲线**：展示两种策略下两个加热器的 $u_1(t), u_2(t)$
- **性能指标对比**

### 10.4 Summary

**画图要求：**
- **多加热器必要性结论**：单加热器 vs 双加热器的 J 值改善百分比
- **最佳配置推荐**：L 形房间的推荐加热器数量、位置和控制策略
- **成本效益分析**：双加热器的 J 值改善 vs 增加的系统复杂度（切换次数等）
- 输出 CSV

---

## 2D 图表清单总表

### Part A：正方形房间实验（实验 1-6）

| # | 实验 | 图名 | 类型 | 说明 |
|---|------|------|------|------|
| 1 | 1.1-1.3 | 各扫描线的终态温度场 | 2D 热力图 ×3 组 | 每组 5 个位置并排 |
| 2 | 1.1-1.3 | 各扫描线的评价指标 vs 位置 | 折线图 ×3 组 | 4 面板（E, RMSE, U, $N_{sw}$）|
| 3 | 1.1-1.3 | 各扫描线的均温时间曲线 | 叠加曲线 ×3 组 | 多位置叠加 |
| 4 | 1.4 | 加热器 2D 扫描指标热图 | 2×2 面板热力图 | J, E, RMSE, U |
| 5 | 1.5 | 三条扫描线 J 叠加对比 | 折线叠加图 | 核心对比图 |
| 6 | 1.5 | 最优位置终态温度场 | 单张大图 | 标注详细信息 |
| 7 | 2.1-2.2 | 恒温器扫描指标 vs 位置 | 折线图 ×2 组 | 4 面板 |
| 8 | 2.3 | 恒温器 2D 扫描热图 | 1×2 面板 | J + SensorBias |
| 9 | 2.4 | 恒温器在加热器旁 vs 最优位置对比 | 温度场+指标对比 | 证明关键结论 |
| 10 | 3.1 | 点热源 vs 高斯：加热器扫描对比 | 1×2 热力图 | 左点右高斯 |
| 11 | 3.2 | 点热源 vs 高斯：恒温器扫描对比 | 1×2 热力图 | 左点右高斯 |
| 12 | 3.3 | 同位置温度场对比 | 2×3 网格热力图 | 行=热源，列=位置 |
| 13 | 4.1 | RNNN vs RRRR：加热器扫描对比 | 1×2 热力图 | 并排 |
| 14 | 4.2 | RNNN vs RRRR：恒温器扫描对比 | 1×2 热力图 | 并排 |
| 15 | 4.3 | 两种 BC 最优方案温度场 | 1×2 热力图 + 柱状图 | 终态对比 |
| 16 | 5.2 | 全局最优方案配置图 | 2D 平面标注 | 核心结论图 |
| 17 | 5.2 | 最优方案温度场演化 | 1×5 快照 | 时间推进 |
| 18 | 5.3 | Top-10 排名表 | 表格 | 含权重敏感性 |

### Part B：几何对比与 L 形房间实验（实验 7-10）

| # | 实验 | 图名 | 类型 | 说明 |
|---|------|------|------|------|
| 19 | 7.1 | 三种几何加热器扫描热图 | 1×3 热力图面板 | Square / Rect / L-shape |
| 20 | 7.2 | 三种几何恒温器扫描热图 | 1×3 热力图面板 | Square / Rect / L-shape |
| 21 | 7.3 | 三种几何最优方案温度场 | 1×3 热力图 + 柱状图 | 终态对比 + 指标对比 |
| 22 | 7.4 | 矩形 vs L 形等面积对比 | 1×2 热力图 + 柱状图 | 等面积不同形状 |
| 23 | 8.1 | L 形不同加热器位置温度场 | 2×3 热力图 | 6 个代表位置 |
| 24 | 8.1 | 死角区域温度柱状图 | 柱状图 | 平均温度 + 最低温度 |
| 25 | 8.2 | 死角区域时间演化 | 时空热力图 + 时间曲线 | 最佳 vs 最差方案 |
| 26 | 8.3 | CR 空间分布热力图 | 1×3 热力图 | 舒适覆盖率空间分布 |
| 27 | 9.1 | L 形加热器扫描热图 | 1×2 面板 | L-RNNN / L-RRRR |
| 28 | 9.2 | L 形恒温器扫描热图 | 1×2 面板 | J + SensorBias |
| 29 | 9.3 | L 形全枚举最优方案 | 配置图 + 1×5 快照 | 全局最优 |
| 30 | 9.4 | L 形 vs 正方形最优方案深度对比 | 1×2 热力图 + 柱状图 | 跨几何对比 |
| 31 | 10.1 | 单 vs 双加热器温度场对比 | 2×2 热力图 | 4 种方案 |
| 32 | 10.1 | 单 vs 双加热器性能指标 | 柱状图 | 含死角温度 |
| 33 | 10.2 | 最优双加热器配置图 | L 形平面标注 | ★1 + ★2 + ● |
| 34 | 10.3 | 同步 vs 独立控制对比 | 1×2 温度场 + 控制信号 | 恒温器策略 |
| 35 | 10.4 | 多加热器综合结论 | 表格 + CSV | 成本效益分析 |

**总计约 35 类主图**（含子面板），其中最核心的：

**正方形房间（基准）：**
- **实验 1.4** 的加热器位置热图（回答"加热器放哪"）
- **实验 2.3** 的恒温器位置热图（回答"恒温器放哪"）
- **实验 3.1** 的点 vs 高斯对比（回答"热源类型影响"）
- **实验 5.2** 的最终推荐图（回答"最终方案"）

**几何对比与 L 形房间：**
- **实验 7.3** 的三种几何对比（回答"房间形状影响有多大"）
- **实验 8.1** 的死角温度分析（回答"L 形的热盲区问题"）
- **实验 9.3** 的 L 形全枚举（回答"L 形最优配置"）
- **实验 10.1** 的单 vs 双加热器（回答"L 形是否需要多加热器"）

